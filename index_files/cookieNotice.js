define(['text!templates/cookieNotice.html'],function(template){Vue.component('cookienotice',{template:template,data:function(){return{sharedState:bwb.store.state,cookieName:'bwbCookieAcceptance',cookie:{ID:'',AllowAllCookies:false}};},computed:{displayCookieBar:function(){return this.cookie.ID==''||this.sharedState.showCookieNotice;}},methods:{allowAllCookies:function(){this.cookie.AllowAllCookies=true;this.setCookie();},allowEssentialCookies:function(){this.cookie.AllowAllCookies=false;this.setCookie();},setCookie(){var self=this;$.post({url:'/Cookie/SetDeviceCookie',data:this.cookie}).done(function(serverCookie){self.cookie=serverCookie;bwb.store.setShowCookieNotice(false);bwb.helpers.setCookie(self.cookieName,JSON.stringify(serverCookie),999);$("#gdprCookieNotice").fadeOut();}).fail(function(reason){console.log('Error Setting Server Cookie',reason);});},loadCookie(){var cookieString=bwb.helpers.getCookie(this.cookieName);if(cookieString){this.cookie=JSON.parse(cookieString);}}},created:function(){this.loadCookie();}});});