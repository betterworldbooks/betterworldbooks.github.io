define(['text!templates/jumbotron.html'],function(template){Vue.component('jumbotron',{template:template,props:['imageurl','backgroundcolor','header-html','copy-html','button-html','href','button-class','details-html','details-href','details-class','mobile-min-height','enable-book-pattern','category','query','app-id','api-key','index-name','timer-ends','timer-html','border-radius','book-pattern-index','showdualj','imageurl2','backgroundcolor2','header-html2','copy-html2','button-html2','button-class2','href2','details-html2','details-href2','details-class2','enable-book-pattern2','jumbotronlclass','jumbotronrclass','category2','query2'],data:function(){return{defaultImageUrl:'/content/images/gallery/masthead-bargain-bin-BBUSNEW.jpg',defaultBackgroundColor:'#1B234A',defaultHref:'/search/results?q=&Categories=Bargain%20Bin',timeRemaining:'',timerInterval:null,ljumboheight:"",rjumboheight:"",heightctrl:""};},computed:{basicTron:function(){return(!this.headerHtml||!this.buttonHtml);},linkAddress:function(){if(!this.href)return this.defaultHref;return this.href;},linkAddress2:function(){if(!this.href2)return this.defaultHref;return this.href2;},showDetailButton:function(){return this.detailsHref&&this.detailsHref.length&&this.detailsHtml&&this.detailsHtml.length;},showModalButton:function(){return this.detailsHref=='modal'&&this.detailsHtml&&this.detailsHtml.length;},backgroundStyle:function(){return{'background-color':(this.backgroundcolor)?this.backgroundcolor:this.defaultBackgroundColor,'background-image':"url('"+((this.imageurl)?this.imageurl:this.defaultImageUrl)+"')",'padding-top':(this.timerEnds&&this.timerHtml)?"28px":"",'border-radius':(this.borderRadius)?this.borderRadius:"0"}},backgroundStyle2:function(){return{'background-color':(this.backgroundcolor2)?this.backgroundcolor2:this.defaultBackgroundColor,'background-image':"url('"+((this.imageurl2)?this.imageurl2:this.defaultImageUrl)+"')",'padding-top':(this.timerEnds&&this.timerHtml)?"28px":"",'border-radius':(this.borderRadius)?this.borderRadius:"0"}},backgroundStyleMobile:function(){return{'background-color':(this.backgroundcolor)?this.backgroundcolor:this.defaultBackgroundColor,'background-image':"url('"+((this.imageurl)?this.imageurl:this.defaultImageUrl)+"')",'min-height':(this.mobileMinHeight)?this.mobileMinHeight:'145px','border-radius':(this.borderRadius)?this.borderRadius:"0"}},detailButtonClass:function(){if(this.detailsClass&&this.detailsClass.length)
return this.detailsClass;return "btn btn-primary btn-lg";},detailButtonClass2:function(){if(this.detailsClass2&&this.detailsClass2.length)
return this.detailsClass2;return "btn btn-primary btn-lg";},linkButtonClass:function(){if(this.buttonClass&&this.buttonClass.length)
return this.buttonClass;return "btn btn-primary btn-lg";},linkButtonClass2:function(){if(this.buttonClass2&&this.buttonClass2.length)
return this.buttonClass;return "btn btn-primary btn-lg";},countdownHtml:function(){return this.timerHtml.replace("{countdown}",this.timeRemaining);},setJumbotronClass:function(){if(this.showdualj=='true'){if(this.jumbotronlclass==""){return "jumbotron col-md-6";}else{return this.jumbotronlclass;}}else{return "jumbotron";}},setJumbotronRClass:function(){if(this.showdualj=='true'){if(this.jumbotronrclass==""){return "jumbotron col-md-6";}else{return this.jumbotronrclass;}}else{return "jumbotron";}}},methods:{calculateTimeRemaining:function(){var now=new Date().getTime();var distance=new Date(this.timerEnds)-now;var days=Math.floor(distance/(1000*60*60*24));var hours=Math.floor((distance%(1000*60*60*24))/(1000*60*60));var minutes=Math.floor((distance%(1000*60*60))/(1000*60));var seconds=Math.floor((distance%(1000*60))/1000);if(days<0)days=0;if(hours<0)hours=0;if(minutes<0)minutes=0;if(seconds<0)seconds=0;this.timeRemaining=days+"d : "+hours+"h : "+minutes+"m : "+seconds+"s";},initilizeCtrl:function(){if(this.showdualj=='true'){this.ljumboheight=this.$refs.lcontainer.clientHeight+'px';this.rjumboheight=this.$refs.rcontainer.clientHeight+'px';if(this.ljumboheight>=this.rjumboheight){this.heightctrl="left";}else{this.heightctrl="right";}
this.matchHeights();}},matchHeights:function(){var self=this;this.ljumboheight=this.$refs.lcontainer.clientHeight+'px';this.rjumboheight=this.$refs.rcontainer.clientHeight+'px';if(this.heightctrl=="left"){self.$refs.rcontainer.style.height=this.ljumboheight;}
if(this.heightctrl=="right"){self.$refs.lcontainer.style.height=this.rjumboheight;}},onResize(event){if(this.showdualj=='true'){this.matchHeights();}}},mounted:function(){var self=this;if(self.timerEnds&&self.timerHtml){self.calculateTimeRemaining();self.timerInterval=setInterval(self.calculateTimeRemaining,500);}
window.addEventListener('resize',this.onResize);setTimeout(function(){self.initilizeCtrl()},750);},beforeDestroy(){window.removeEventListener('resize',this.onResize);}});});