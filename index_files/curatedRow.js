define(['text!templates/curatedRow.html'],function(template){Vue.component('curatedrow',{template:template,props:['name','description','app-id','api-key','index-name','isbns','show-new-price'],data:function(){return{hits:[],localize:bwb.localize.siteSettings,client:null,index:null,isbnArray:[]};},computed:{rowId:function(){return bwb.helpers.dashify(this.name);},hideMe:function(){return!this.isbns;}},methods:{getItems:function(){if(!this.isbnArray)
return;for(var x=0;x<6;x++){this.getHit(this.isbnArray[x]);}},getHit:function(isbn){var self=this;self.client=algoliasearch(self.appId,self.apiKey);self.index=self.client.initIndex(self.indexName);self.index.search({query:'\"'+isbn+'\"'}).then(function(result){if(result&&result.hits.length){self.hits.push(result.hits[0]);}});},shuffle:function(){if(!this.isbnArray)
return;var array=this.isbnArray;var currentIndex=array.length,temporaryValue,randomIndex;while(0!==currentIndex){randomIndex=Math.floor(Math.random()*currentIndex);currentIndex-=1;temporaryValue=array[currentIndex];array[currentIndex]=array[randomIndex];array[randomIndex]=temporaryValue;}
this.isbnArray=array;}},mounted:function(){this.isbnArray=this.isbns.split(",");this.shuffle();this.getItems();}});});